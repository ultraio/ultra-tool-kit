import{d as P,j as q,r as a,k as z,a as w,o as u,b as y,h as e,F as E,f as v,w as k,v as C,l as i,m as I,t as R,n as M,L as j,i as T,E as W}from"./index-fb5e0693.js";import{P as Y}from"./papaparse.min-9a67fbe8.js";const H=e("div",{class:"text-3xl font-bold"},"UOS Mass Transfer",-1),G=e("br",null,null,-1),J={class:"grid gap-4 grid-cols-1"},K={key:0},Q=e("span",null,"You are not currently logged in, please log in to view this page.",-1),X=[Q],Z=e("div",{class:"grid gap-4 grid-cols-1 text-md p-2 border rounded-md px-4 bg-neutral-700 border-neutral-600"},[e("div",{class:"grid gap-px grid-rows-1"},[e("span",{class:"[font-family:'Inter-Regular',Helvetica] text-[#f9d198]"},[e("b",null,"Input Format"),e("br"),e("br"),i(" Your CSV file must be formatted like below, make sure you have the first row with the header. Duplicate receiver accounts are allowed. ")])]),e("div",{class:"grid gap-px grid-rows-1"},[e("pre",null,[i(""),e("b",null,"account,quantity"),i(`
ab1bc2cd3de4,100.0
ab1bc2cd3de4,150.05
bb1cc2dd3ee4,420
`)])])],-1),ee={class:"grid gap-4 grid-cols-1 text-md p-2 border rounded-md px-5 border-neutral-700"},te=e("div",{class:"grid gap-px grid-rows-1"},null,-1),ae={class:"grid grid-rows-1 gap-4"},oe={class:"grid grid-cols-2 gap-4"},le={class:"flex flex-row h-12 gap-4"},se={class:"flex flex-row h-12 gap-4"},re={class:"flex flex-row h-12 gap-4"},ne={class:"grid gap-4 py-4"},ue=e("span",null,null,-1),ce=P({__name:"index",props:{state:{},metadata:{}},emits:["transact"],setup(V,{emit:F}){q();const g=V,U=F,l=a(),n=a(),m=a(""),d=a(""),f=a(!1),c=a(!1),b=a([]),r=a([]),_=a(0),p=a(""),h=a();function S(){p.value="",h.value=void 0}const N=()=>{d.value="",f.value=!1,c.value=!1,b.value=[],r.value=[],S()},$=o=>{N(),d.value=o.target.files[0],d.value&&(c.value=!0,f.value=!1,B())},B=async()=>{Y.parse(d.value,{header:!0,skipEmptyLines:!0,complete:function(o){o.errors&&(h.value="parse",p.value=o.errors.slice(0,100).map(t=>`${t.message} at row ${t.row}`).join("<br>")),b.value=o.data,D(),f.value=!0,c.value=!1}})},D=()=>{_.value=0,r.value=b.value.map(o=>{let t=parseFloat(o.quantity);return _.value+=t,{contract:"eosio.token",action:"transfer",authorization:[{actor:l.value,permission:n.value}],data:{from:l.value,to:o.account,quantity:`${t.toFixed(8)} UOS`,memo:m.value}}})},L=()=>g.state.accountName?((!l.value||l.value.length===0)&&(W.includes(g.state.accountName)?(l.value="ultra.mrktng",n.value="team"):(l.value=g.state.accountName,n.value="active")),!0):!1;return z(async()=>{}),(o,t)=>{const x=w("LabelWithTooltip"),O=w("Button"),A=w("ErrorModal");return u(),y(E,null,[H,G,e("div",J,[L()?(u(),y(E,{key:1},[Z,e("div",ee,[te,e("div",ae,[e("div",oe,[v(x,{label:"Authorizer"}),e("div",le,[k(e("input",{class:"flex-grow rounded bg-neutral-950 text-neutral-200 pl-4 border border-neutral-700 focus:outline-none pr-4","onUpdate:modelValue":t[0]||(t[0]=s=>l.value=s),placeholder:"name"},null,512),[[C,l.value]])]),v(x,{label:"Permission"}),e("div",se,[k(e("input",{class:"flex-grow rounded bg-neutral-950 text-neutral-200 pl-4 border border-neutral-700 focus:outline-none pr-4","onUpdate:modelValue":t[1]||(t[1]=s=>n.value=s),placeholder:"name"},null,512),[[C,n.value]])]),v(x,{label:"Memo"}),e("div",re,[k(e("input",{class:"flex-grow rounded bg-neutral-950 text-neutral-200 pl-4 border border-neutral-700 focus:outline-none pr-4","onUpdate:modelValue":t[2]||(t[2]=s=>m.value=s),placeholder:"string"},null,512),[[C,m.value]])]),i(" Select CSV File "),e("input",{type:"file",onChange:t[3]||(t[3]=s=>$(s)),accept:".csv",capture:""},null,32)]),e("div",ne,[ue,v(O,{disabled:r.value.length==0,onOnClick:t[4]||(t[4]=s=>U("transact",r.value))},{default:I(()=>[i(R(r.value.length?`Make ${r.value.length} UOS transfers (total ${_.value} UOS)`:"Transfer"),1)]),_:1},8,["disabled"])])])]),c.value?(u(),M(j,{key:0})):T("",!0)],64)):(u(),y("div",K,X))]),p.value?(u(),M(A,{key:0,title:h.value=="parse"?"CSV Parsing Error":"Transaction Error",errorMessage:`${p.value}`,onClose:S},null,8,["title","errorMessage"])):T("",!0)],64)}}});export{ce as default};
