import{d as O,r as n,k as W,a as w,o as c,b as y,h as a,F as E,f as k,w as S,v as V,l as T,m as j,t as H,n as M,L as Y,i as N,C as G,E as J}from"./index-fb5e0693.js";import{P as K}from"./papaparse.min-9a67fbe8.js";const Q=a("div",{class:"text-3xl font-bold"},"Bulk Factory Creation",-1),X=a("br",null,null,-1),Z={class:"grid gap-4 grid-cols-1"},ee={key:0},te=a("span",null,"You are not currently logged in, please log in to view this page.",-1),ae=[te],se=G('<div class="grid gap-4 grid-cols-1 text-md p-2 border rounded-md px-4 bg-neutral-700 border-neutral-600"><div class="grid gap-px grid-rows-1"><span class="[font-family:&#39;Inter-Regular&#39;,Helvetica] text-[#f9d198]"><b>Input Format</b></span><br><p> Please ensure your CSV file is formatted as specified below. The first row should contain column headers, and each subsequent row should include the corresponding data for a Uniq Factory. All fields are required unless otherwise specified. </p></div><div class="grid gap-px grid-rows-1 mb-2"><p>For a detailed example, download the template: <a href="/resources/bulk-factories.csv" target="_blank">bulk-factories.csv</a></p></div></div>',1),ne={class:"grid gap-4 grid-cols-1 text-md p-2 border rounded-md px-5 border-neutral-700"},re=a("div",{class:"grid gap-px grid-rows-1"},null,-1),oe={class:"grid grid-rows-1 gap-4"},le={class:"grid grid-cols-2 gap-4"},ie={class:"flex flex-row h-12 gap-4"},de={class:"flex flex-row h-12 gap-4"},ue={class:"grid grid-cols-3 gap-4 py-4"},ce=a("span",null,null,-1),me=O({__name:"index",props:{state:{},metadata:{}},emits:["transact"],setup(A,{emit:z}){const f=A,B=z,l=n(),d=n(),_=n(""),h=n(!1),p=n(!1),m=n([]),u=n([]),v=n(""),b=n();function C(){v.value="",b.value=void 0}const P=()=>{_.value="",h.value=!1,p.value=!1,m.value=[],u.value=[],C()},$=e=>{P(),_.value=e.target.files[0],_.value&&(p.value=!0,h.value=!1,L())},L=async()=>{K.parse(_.value,{header:!0,skipEmptyLines:!0,complete:function(e){e.errors&&(b.value="parse",v.value=e.errors.slice(0,100).map(t=>`${t.message} at row ${t.row}`).join("<br>")),m.value=e.data,R(),h.value=!0,p.value=!1}})},x=(e,t,o,i)=>{const g=[];for(let s=1;s<=t;s++){const F=o[`${e}${s}`];F&&g.push(i(F))}return g},q=e=>x("authorized_minters_",5,e,t=>{const[o,i]=t.split(":");return{authorized_minter:o,quantity:parseInt(i)}}),D=e=>x("conditionless_receivers_",5,e,t=>t),I=e=>x("resale_shares_",5,e,t=>{const[o,i]=t.split(":");return{receiver:o,basis_point:parseInt(i)}}),r=e=>!e||e===""?null:e,R=()=>{u.value=m.value.map(e=>({contract:"eosio.nft.ft",action:"create.b",authorization:[{actor:l.value,permission:d.value}],data:{create:{account_minting_limit:e.account_minting_limit||null,asset_creator:e.asset_creator,asset_manager:e.asset_manager,authorized_minters:q(e),conditionless_receivers:D(e),default_token_uri:e.default_token_uri,default_token_hash:e.default_token_hash,factory_hash:e.factory_hash,factory_uri:e.factory_uri,lock_hash:e.lock_hash?e.lock_hash==="true":null,lockup_time:e.lockup_time||null,max_mintable_tokens:e.max_mintable_tokens||null,maximum_uos_payment:e.maximum_uos_payment||null,memo:e.memo||"",minimum_resell_price:e.minimum_resell_price||null,mintable_window_end:r(e.mintable_window_end),mintable_window_start:r(e.mintable_window_start),recall_window_end:r(e.recall_window_end),recall_window_start:r(e.recall_window_start),resale_shares:I(e),stat:e.stat,trading_window_end:r(e.trading_window_end),trading_window_start:r(e.trading_window_start),transfer_window_end:r(e.transfer_window_end),transfer_window_start:r(e.transfer_window_start)}}}))},U=()=>f.state.accountName?((!l.value||l.value.length===0)&&(J.includes(f.state.accountName)?(l.value="ultra.mrktng",d.value="team"):(l.value=f.state.accountName,d.value="active")),!0):!1;return W(async()=>{}),(e,t)=>{const o=w("LabelWithTooltip"),i=w("Button"),g=w("ErrorModal");return c(),y(E,null,[Q,X,a("div",Z,[U()?(c(),y(E,{key:1},[se,a("div",ne,[re,a("div",oe,[a("div",le,[k(o,{label:"Authorizer"}),a("div",ie,[S(a("input",{class:"flex-grow rounded bg-neutral-950 text-neutral-200 pl-4 border border-neutral-700 focus:outline-none pr-4","onUpdate:modelValue":t[0]||(t[0]=s=>l.value=s),placeholder:"name"},null,512),[[V,l.value]])]),k(o,{label:"Permission"}),a("div",de,[S(a("input",{class:"flex-grow rounded bg-neutral-950 text-neutral-200 pl-4 border border-neutral-700 focus:outline-none pr-4","onUpdate:modelValue":t[1]||(t[1]=s=>d.value=s),placeholder:"name"},null,512),[[V,d.value]])]),T(" Select CSV File "),a("input",{type:"file",onChange:t[2]||(t[2]=s=>$(s)),accept:".csv",capture:""},null,32)]),a("div",ue,[ce,k(i,{disabled:u.value.length==0,onOnClick:t[3]||(t[3]=s=>B("transact",u.value))},{default:j(()=>[T(H(u.value.length?`Create ${m.value.length} Factories`:"Create Factory"),1)]),_:1},8,["disabled"])])])]),p.value?(c(),M(Y,{key:0})):N("",!0)],64)):(c(),y("div",ee,ae))]),v.value?(c(),M(g,{key:0,title:b.value=="parse"?"CSV Parsing Error":"Transaction Error",errorMessage:`${v.value}`,onClose:C},null,8,["title","errorMessage"])):N("",!0)],64)}}});export{me as default};
