import{d as R,j as W,r as u,p as Y,q as H,k as J,a as _,o as n,b as s,f as d,m,h as e,s as V,w as B,v as K,F as h,e as b,t as M,x as T,l as $,n as z,i as g,B as O,y as P,z as Q,_ as X}from"./index-85e7c587.js";const c=r=>(P("data-v-e78561a9"),r=r(),Q(),r),Z=c(()=>e("h2",null,"Blacklist",-1)),ee={key:0},te={class:"split-grid"},ae=c(()=>e("label",null,"Account",-1)),oe=c(()=>e("label",null,"Ban Level",-1)),ne={class:"selection"},se=["value"],le=c(()=>e("br",null,null,-1)),ce={class:"search-container"},ie={class:"mt-2"},ue={class:"container"},de=["onSubmit"],re=c(()=>e("h4",null,"Update Ban Level",-1)),ve={class:"split-grid"},_e=c(()=>e("label",null,"Ban Level",-1)),pe={class:"selection"},me=["value"],he={key:0},fe={key:1},ke=c(()=>e("p",null,"You are not currently logged in, please log in to view blacklist.",-1)),ye=[ke],xe=R({__name:"index",props:{state:{},metadata:{}},emits:["transact"],setup(r,{emit:E}){W();const v=r,S=E,f=u([]),i=u(""),p=u(!1),k=u("0"),y=u("1"),x=u(""),w=[{text:"0 (Unban)",value:"0"},{text:"1 (Greylist)",value:"1"},{text:"2 (Blacklist)",value:"2"}];async function N(){v.state.isAdmin&&(p.value=!0,f.value=await O.getBlackList(),p.value=!1)}const A=async a=>{i.value=a},I=Y(()=>!i.value||i.value===""?f.value:f.value.filter(a=>a.account.includes(i.value))),D=a=>{const o=[{contract:"eosio",action:"setacblcklst",data:{account:a.account,level:k.value},authorization:[{actor:"ultra.eosio",permission:"active"}]}];S("transact",o)},F=()=>{const a=[{contract:"eosio",action:"setacblcklst",data:{account:x,level:y.value},authorization:[{actor:"ultra.eosio",permission:"active"}]}];S("transact",a)};return H(()=>v.state,(a,o)=>{console.log("Watch props.state function called with args:",o.accountName,a.accountName),a.accountName&&a.isAdmin&&N()},{deep:!0}),J(async()=>{v.state.accountName&&v.state.isAdmin&&N()}),(a,o)=>{const L=_("Button"),U=_("Expand"),C=_("Input"),G=_("Icon"),j=_("LoadingSpinner");return n(),s(h,null,[Z,v.state.accountName?(n(),s("div",ee,[d(U,{title:"Blacklist New Account",icon:"fa-add"},{default:m(()=>[e("form",{onSubmit:V(F,["prevent"])},[e("div",te,[ae,B(e("input",{type:"string",placeholder:"1aa2aa3aa4aa","onUpdate:modelValue":o[0]||(o[0]=t=>x.value=t)},null,512),[[K,x.value]]),oe,e("div",ne,[B(e("select",{"onUpdate:modelValue":o[1]||(o[1]=t=>y.value=t)},[(n(!0),s(h,null,b(w.filter(t=>t.value!="0"),(t,l)=>(n(),s("option",{key:l,value:t.value},M(t.text),9,se))),128))],512),[[T,y.value]])])]),d(L,{type:"submit"},{default:m(()=>[$("Submit")]),_:1})],32)]),_:1}),le,e("div",ce,[d(C,{type:"text",placeholder:"Search...",value:i.value,onUpdated:A},null,8,["value"]),i.value!==""?(n(),z(G,{key:0,icon:"fa-close",class:"clear-search",onClick:o[2]||(o[2]=t=>A(""))})):g("",!0)]),e("div",null,[(n(!0),s(h,null,b(I.value,t=>(n(),s("div",ie,[d(U,{title:`${t.account} - ${t.level=="1"?"[Greylisted]":"[Blacklisted]"}`},{default:m(()=>[e("div",ue,[e("form",{onSubmit:V(l=>D(t),["prevent"])},[re,e("div",ve,[d(C,{type:"text",name:"account",placeholder:"1aa2aa3aa4aa",value:t.account,disabled:!0,label:"Account"},null,8,["value"]),_e,e("div",pe,[B(e("select",{"onUpdate:modelValue":o[3]||(o[3]=l=>k.value=l)},[(n(!0),s(h,null,b(w.filter(l=>l.value!=t.level),(l,q)=>(n(),s("option",{key:q,value:l.value},M(l.text),9,me))),128))],512),[[T,k.value]])])]),d(L,{type:"submit"},{default:m(()=>[$("Update")]),_:1})],40,de)])]),_:2},1032,["title"])]))),256)),I.value.length==0&&!p.value?(n(),s("p",he,"No blacklist/greylist accounts found.")):g("",!0),p.value?(n(),z(j,{key:1})):g("",!0)])])):(n(),s("div",fe,ye))],64)}}});const be=X(xe,[["__scopeId","data-v-e78561a9"]]);export{be as default};
