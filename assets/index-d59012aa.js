import{d as R,j as K,G as S,r as w,a as c,o as i,b as g,h as t,w as p,v as f,A as b,f as u,m as _,n as y,i as x,l as T,H as U,B as L}from"./index-e68b890c.js";const q={class:"flex flex-col gap-4"},A=t("div",{class:"text-2xl font-bold"},"Search Table",-1),E=t("div",null," When searching large tables please use lower_bound and upper_bound to limit the amount of table entries returned. ",-1),O={class:"flex flex-row gap-2"},j={class:"flex flex-col p-4 border rounded border-neutral-700"},I={class:"flex flex-row h-12 gap-2"},D={key:0,class:"flex flex-col gap-4"},G=t("div",{class:"text-2xl font-bold"},"Results",-1),H={class:"flex flex-col"},J={key:1,class:"flex flex-col"},P=R({__name:"index",props:{state:{},metadata:{}},setup(h){K();const k=h,e=S({account:"",table:"",scope:"",lower_bound:"",upper_bound:""}),r=w(!1),s=w(),d=w(void 0);function B(){e.account="",e.table="",e.scope="",e.lower_bound="",e.upper_bound="",s.value=void 0}async function l(v=null){r.value=!0,v&&(e.lower_bound=v);for(let a of Object.keys(e))if(!(a==="lower_bound"||a==="upper_bound")&&e[a]===""){r.value=!1;return}const o=await U(k.state.endpoint);if(!o){r.value=!1;return}try{d.value=await L.roundRobinRequest(async()=>await o.contract(e.account).getTableLimited(e.table,e.scope,e.lower_bound,e.upper_bound,10)),s.value=JSON.stringify(d.value)}catch{}r.value=!1}return(v,o)=>{const a=c("Icon"),m=c("Button"),C=c("Expand"),N=c("LoadingSpinner"),V=c("Code");return i(),g("div",q,[A,E,t("div",O,[p(t("input",{"onUpdate:modelValue":o[0]||(o[0]=n=>e.account=n),placeholder:"Account Name",onKeyup:b(l,["enter"]),class:"flex-grow rounded bg-neutral-950 text-neutral-200 pl-4 border border-neutral-700 focus:outline-none pr-4"},null,544),[[f,e.account]]),p(t("input",{"onUpdate:modelValue":o[1]||(o[1]=n=>e.table=n),placeholder:"Table Name",onKeyup:b(l,["enter"]),class:"flex-grow rounded bg-neutral-950 text-neutral-200 pl-4 border border-neutral-700 focus:outline-none pr-4"},null,544),[[f,e.table]]),p(t("input",{"onUpdate:modelValue":o[2]||(o[2]=n=>e.scope=n),placeholder:"Scope Name",onKeyup:b(l,["enter"]),class:"flex-grow rounded bg-neutral-950 text-neutral-200 pl-4 border border-neutral-700 focus:outline-none pr-4"},null,544),[[f,e.scope]]),u(m,{onClick:o[3]||(o[3]=()=>l())},{default:_(()=>[u(a,{icon:"fa-check"})]),_:1}),u(m,{onClick:B},{default:_(()=>[u(a,{icon:"fa-trash"})]),_:1})]),u(C,{title:"Additional Options"},{default:_(()=>[t("div",j,[t("div",I,[p(t("input",{"onUpdate:modelValue":o[4]||(o[4]=n=>e.lower_bound=n),placeholder:"Lower Bound",onKeyup:b(l,["enter"]),class:"flex-grow rounded bg-neutral-950 text-neutral-200 pl-4 border border-neutral-700 focus:outline-none pr-4"},null,544),[[f,e.lower_bound]]),p(t("input",{"onUpdate:modelValue":o[5]||(o[5]=n=>e.upper_bound=n),placeholder:"Upper Bound",onKeyup:b(l,["enter"]),class:"flex-grow rounded bg-neutral-950 text-neutral-200 pl-4 border border-neutral-700 focus:outline-none pr-4"},null,544),[[f,e.upper_bound]])])])]),_:1}),s.value?(i(),g("div",D,[G,t("div",H,[r.value?(i(),y(N,{key:0})):x("",!0),s.value&&!r.value?(i(),g("div",J,[u(V,{code:s.value},null,8,["code"])])):x("",!0)]),d.value&&d.value.next_key?(i(),y(m,{key:0,onClick:o[6]||(o[6]=()=>l(d.value.next_key))},{default:_(()=>[T(" Next Page ")]),_:1})):x("",!0)])):x("",!0)])}}});export{P as default};
