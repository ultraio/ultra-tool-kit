import{d as T,r,k as $,a as m,o as l,b as u,h as n,w as j,v as D,A as J,f as k,m as x,l as O,F as d,e as A,n as g,t as _,i as C,B as F}from"./index-9dadb0c5.js";const K={class:"flex flex-col flex-grow w-full gap-4 text-sm"},M=n("div",{class:"text-3xl font-bold"},"Transaction Builder",-1),R=n("div",null,"Add all the contract accounts you want to use, before building a transaction.",-1),q=n("div",{class:"text-2xl font-bold mt-4"},"Add Contract Accounts",-1),E={class:"flex flex-col"},L={class:"flex flex-row gap-4 mb-4"},U={class:"flex flex-row gap-4"},z=n("div",{class:"text-2xl font-bold mt-4"},"Added Contract Accounts",-1),G={class:"flex flex-row gap-4"},Q=T({__name:"index",props:{state:{},metadata:{}},emits:["transact"],setup(h,{emit:b}){const y=h,B=b,o=r([]),c=r(""),f=r(0),S=r(["eosio","eosio.token","eosio.nft.ft","eosio.group","ultra.avatar","ultra.tools"]);async function v(a){if(a){o.value.push({account:a,status:"loading"}),await p();return}c.value!==""&&(o.value.push({account:c.value,status:"loading"}),c.value="",await p())}async function N(a){o.value.splice(a,1),await p()}async function p(){await w(),f.value+=1,localStorage.setItem("transactionBuilderState",JSON.stringify(o.value))}async function w(){for(let a of o.value){if(a.status==="not found")continue;let t=!1;try{await F.getAbi(a.account,!1)&&(t=!0)}catch(s){console.log(s)}a.status=t?"found":"not found"}}return $(async()=>{const a=localStorage.getItem("transactionBuilderState");if(a)try{const t=JSON.parse(a);Array.isArray(t)||localStorage.setItem("transactionBuilderState",JSON.stringify([])),o.value=t;for(let s of o.value)s.status="loading";await w(),f.value+=1}catch{}}),(a,t)=>{const s=m("Button"),I=m("Icon"),V=m("AbiRender");return l(),u("div",K,[M,R,q,n("div",E,[n("div",L,[j(n("input",{placeholder:"Contract account name","onUpdate:modelValue":t[0]||(t[0]=e=>c.value=e),onKeyup:t[1]||(t[1]=J(e=>v(void 0),["enter"])),class:"bg-neutral-950 rounded flex-grow text-neutral-200 pl-4 pr-4 focus:outline-none"},null,544),[[D,c.value]]),k(s,{onClick:t[2]||(t[2]=e=>v(void 0))},{default:x(()=>[O("Add Contract Account")]),_:1})]),n("div",U,[(l(!0),u(d,null,A(S.value,e=>(l(),u(d,null,[o.value.find(i=>i.account===e)?C("",!0):(l(),g(s,{key:0,onClick:i=>v(e),class:"flex flex-row gap-4 items-center justify-center"},{default:x(()=>[n("span",null,_(e),1)]),_:2},1032,["onClick"]))],64))),256))])]),o.value.length>=1?(l(),u(d,{key:0},[z,n("div",G,[(l(!0),u(d,null,A(o.value,(e,i)=>(l(),g(s,{onClick:H=>N(i),class:"flex flex-row gap-4 items-center justify-center"},{default:x(()=>[n("span",null,_(e.account)+" "+_(e.status==="found"?"":e.status==="not found"?"(not found)":"(loading)"),1),k(I,{icon:"fa-close"})]),_:2},1032,["onClick"]))),256))]),(l(),g(V,{key:f.value,accounts:o.value,state:y.state,metadata:y.metadata,onTransact:t[3]||(t[3]=e=>B("transact",e))},null,8,["accounts","state","metadata"]))],64)):C("",!0)])}}});export{Q as default};
